<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="chat.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="chat-box">
        <div id="messages">
            <p id="msgs"></p>
        </div>
        <input type="text" id="message-input" placeholder="Type your message...">
        <button id="send-button" onclick="send()">Send</button>
      </div>
      <script>
         const urlParams = new URLSearchParams(window.location.search);
         const username = urlParams.get('username');
         console.log(username);
        const socket = new WebSocket('ws://localhost:4000');
        console.log('Connected to server');
        function send(){
            var msg = document.getElementById('message-input').value;
            
            console.log(msg);
            const socket = new WebSocket('ws://localhost:4000');
    socket.addEventListener('open', (event) => {
    
  
  socket.send(msg);
});

if(document.getElementById('msgs').innerHTML=='')
{
    document.getElementById('msgs').innerHTML=msg;
}
else{
    document.getElementById('msgs').innerHTML='';
}

}

socket.addEventListener('message', (event) => {
  console.log(`Received from server: ${event.data}`);
});

socket.addEventListener('close', (event) => {
  console.log('Disconnected from server');
});
    </script>
      

    
</body>
</html>